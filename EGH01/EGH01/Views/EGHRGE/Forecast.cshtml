@using EGH01.Core;
@using EGH01.Models.EGH;
@using EGH01DB.Primitives;
@using EGH01DB.Types;
@model EGH01DB.RGEContext

@{
   
    Layout = "~/Views/Shared/EGHLayout.cshtml";
    Menu start = new Menu(
                          new Menu.MenuItem("Прогноз",    "Forecast.Forecast", true),
                          new Menu.MenuItem("Отказаться", "Forecast.Cancel",   true)
                        );

   
    List<EGH01DB.Types.PetrochemicalType> ptl = new List<EGH01DB.Types.PetrochemicalType>();
    ViewBag.petrochemicaltype = new List<SelectListItem>();
    if (Model != null)
    {
        if (Helper.GetListPetrochemicalType(Model, ref ptl))
        {
            ptl.ForEach(o => ViewBag.petrochemicaltype.Add(new SelectListItem { Text = o.name, Value = o.code_type.ToString() }));
        }
    }

   
    ViewBag.incidenttype = new List<SelectListItem>();
    if (Model != null)
    {

        EGH01DB.Types.IncidentTypeList itl = new EGH01DB.Types.IncidentTypeList(Model);
        itl.ForEach(o => ViewBag.incidenttype.Add(new SelectListItem { Text = o.name, Value = o.type_code.ToString() }));
        
        
        
    }              
                                 
 }

@using (Html.BeginForm("Forecast", "EGHRGE"))
{

    <div class="box">
        <div class="boxdata">
            <p>
                <label class="boxdata-label-30"> Дата инцидента </label>
                <input class="boxdata-input-30" type="date" name="date" value=" " />
            </p>
            <p>
                <label class="boxdata-label-30"> Дата регистрации </label>
                <input class="boxdata-input-30" type="date" name="date_message" value=" " />
            </p>
            <p>
                <label class="boxdata-label-30">Тип нефтепродукта</label>
                <span  class= "boxdata-input-30"> @Html.DropDownList("petrochemicaltype") </span>
           </p>
            <p>
                <label class="boxdata-label-30">Тип инцидента</label>
                <span class="boxdata-input-30">  @Html.DropDownList("incidenttype")</span>
            </p>
        </div>
                    
        @Html.Partial("_TypeLineMenu", start)
     </div>
       
    
}

<h2>Forecast</h2>

